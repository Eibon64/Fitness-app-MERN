{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UnboundedCache = void 0;\nclass UnboundedCache {\n  constructor() {\n    let cache = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Map();\n    this.cache = cache;\n  }\n  async get(key) {\n    const entry = this.cache.get(key);\n    if (!entry) return undefined;\n    if (entry.deadline && entry.deadline <= Date.now()) {\n      await this.delete(key);\n      return undefined;\n    }\n    return entry.value;\n  }\n  async set(key, value) {\n    let {\n      ttl\n    } = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n      ttl: null\n    };\n    this.cache.set(key, {\n      value,\n      deadline: ttl ? Date.now() + ttl * 1000 : null\n    });\n  }\n  async delete(key) {\n    this.cache.delete(key);\n  }\n}\nexports.UnboundedCache = UnboundedCache;","map":{"version":3,"names":["UnboundedCache","constructor","cache","arguments","length","undefined","Map","get","key","entry","deadline","Date","now","delete","value","set","ttl","exports"],"sources":["/Users/chadward/node_modules/apollo-server-core/src/utils/UnboundedCache.ts"],"sourcesContent":["import type { KeyValueCache } from '@apollo/utils.keyvaluecache';\n\nexport class UnboundedCache<T = string> implements KeyValueCache<T> {\n  constructor(\n    private cache: Map<\n      string,\n      { value: T; deadline: number | null }\n    > = new Map(),\n  ) {}\n\n  async get(key: string) {\n    const entry = this.cache.get(key);\n    if (!entry) return undefined;\n    if (entry.deadline && entry.deadline <= Date.now()) {\n      await this.delete(key);\n      return undefined;\n    }\n    return entry.value;\n  }\n\n  async set(\n    key: string,\n    value: T,\n    { ttl }: { ttl: number | null } = { ttl: null },\n  ) {\n    this.cache.set(key, {\n      value,\n      deadline: ttl ? Date.now() + ttl * 1000 : null,\n    });\n  }\n\n  async delete(key: string) {\n    this.cache.delete(key);\n  }\n}\n"],"mappings":";;;;;;AAEA,MAAaA,cAAc;EACzBC,YAAA,EAIe;IAAA,IAHLC,KAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAGJ,IAAIG,GAAG,EAAE;IAHL,KAAAJ,KAAK,GAALA,KAAK;EAIZ;EAEH,MAAMK,GAAGA,CAACC,GAAW;IACnB,MAAMC,KAAK,GAAG,IAAI,CAACP,KAAK,CAACK,GAAG,CAACC,GAAG,CAAC;IACjC,IAAI,CAACC,KAAK,EAAE,OAAOJ,SAAS;IAC5B,IAAII,KAAK,CAACC,QAAQ,IAAID,KAAK,CAACC,QAAQ,IAAIC,IAAI,CAACC,GAAG,EAAE,EAAE;MAClD,MAAM,IAAI,CAACC,MAAM,CAACL,GAAG,CAAC;MACtB,OAAOH,SAAS;;IAElB,OAAOI,KAAK,CAACK,KAAK;EACpB;EAEA,MAAMC,GAAGA,CACPP,GAAW,EACXM,KAAQ,EACuC;IAAA,IAA/C;MAAEE;IAAG,IAAAb,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAA6B;MAAEa,GAAG,EAAE;IAAI,CAAE;IAE/C,IAAI,CAACd,KAAK,CAACa,GAAG,CAACP,GAAG,EAAE;MAClBM,KAAK;MACLJ,QAAQ,EAAEM,GAAG,GAAGL,IAAI,CAACC,GAAG,EAAE,GAAGI,GAAG,GAAG,IAAI,GAAG;KAC3C,CAAC;EACJ;EAEA,MAAMH,MAAMA,CAACL,GAAW;IACtB,IAAI,CAACN,KAAK,CAACW,MAAM,CAACL,GAAG,CAAC;EACxB;;AA/BFS,OAAA,CAAAjB,cAAA,GAAAA,cAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}